<div class="relative">
  <input
    type="text"
    [(ngModel)]="searchTerm"
    (ngModelChange)="onSearchChange()"
    (blur)="isDropdownOpen = false"
    placeholder="Rechercher un redevable..."
    class="w-full px-3 py-2 text-gray-800 bg-gray-50 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#187181]"
  />

  <!-- Dropdown -->
  <div
    *ngIf="isDropdownOpen && searchResults.length > 0"
    class="absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto"
  >
    <ul>
      <li
        *ngFor="let redevable of searchResults"
        (mousedown)="selectRedevable(redevable)"
        class="px-4 py-2 cursor-pointer hover:bg-gray-100"
      >
        <p class="font-medium text-gray-800">
          {{ redevable.nomRaisonSociale }}
        </p>
        <p class="text-sm text-gray-500">NIF: {{ redevable.nif }}</p>
      </li>
    </ul>
  </div>
  <div
    *ngIf="
      isDropdownOpen && searchTerm.length > 1 && searchResults.length === 0
    "
    class="absolute z-10 w-full mt-1 p-4 bg-white border border-gray-200 rounded-md shadow-lg"
  >
    <p class="text-sm text-gray-500">Aucun redevable trouv√©.</p>
  </div>
</div>
